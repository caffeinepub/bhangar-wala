{
  "kind": "feature_evidence_report",
  "features": [
    {
      "featureId": "feature-fix-the-failed-to-save-address-please-try-again-error-on-the-add-address-screen-add-address-diagnose-and-repair-the-addaddress-backend-call-1-ensure-the-userid-passed-to-the-backend-is-correctly-read-from-localstorage-the-stored-phone-number-without-country-code-prefix-if-required-by-backend-2-ensure-all-required-fields-street-city-pincode-are-non-empty-before-submission-3-ensure-the-address-label-defaults-to-a-valid-value-home-work-or-other-if-unset-4-ensure-optional-lat-lng-fields-are-serialised-as-null-when-not-provided-rather-than-as-undefined-or-empty-string-5-wrap-the-actor-call-in-a-proper-try-catch-and-surface-a-descriptive-inline-error-message-after-a-successful-save-navigate-back-to-addresses",
      "featureTitle": "Fix the 'Failed to save address. Please try again.' error on the Add Address screen (`/add-address`). Diagnose and repair the `addAddress` backend call: (1) ensure the userId passed to the backend is correctly read from localStorage (the stored phone number without country code prefix if required by backend); (2) ensure all required fields (street, city, pincode) are non-empty before submission; (3) ensure the address label defaults to a valid value ('Home', 'Work', or 'Other') if unset; (4) ensure optional lat/lng fields are serialised as `null` when not provided rather than as undefined or empty string; (5) wrap the actor call in a proper try/catch and surface a descriptive inline error message. After a successful save, navigate back to `/addresses`.",
      "files": [
        "frontend/src/hooks/useQueries.ts",
        "frontend/src/pages/AddAddress.tsx"
      ],
      "components": [
        "authorization@4.0.0",
        "blob-storage@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-64"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-fix-the-booking-creation-error-on-the-book-pickup-screen-book-pickup-diagnose-and-repair-the-createbooking-backend-call-1-ensure-the-userid-passed-to-the-backend-is-the-plain-phone-number-from-localstorage-stripped-of-91-prefix-if-the-backend-expects-a-plain-10-digit-string-2-ensure-the-addressid-references-a-valid-address-that-belongs-to-the-user-if-no-addresses-are-present-block-progression-and-prompt-the-user-to-add-an-address-first-3-ensure-scheduledtime-is-serialised-as-an-integer-timestamp-nanoseconds-or-milliseconds-as-expected-by-the-motoko-backend-and-not-as-a-string-or-iso-date-4-ensure-all-bookingitems-have-valid-categoryid-estimatedweight-a-positive-float-and-that-the-array-is-non-empty-before-submission-5-ensure-totalestimatedamount-is-computed-correctly-as-a-float-and-passed-in-the-expected-motoko-type-6-wrap-the-actor-call-in-a-try-catch-and-surface-a-human-readable-error-message-on-the-step-4-confirm-screen-if-the-backend-returns-an-error-variant-or-throws-after-a-successful-booking-creation-navigate-to-booking-confirmation-with-the-new-booking-id",
      "featureTitle": "Fix the booking creation error on the Book Pickup screen (`/book-pickup`). Diagnose and repair the `createBooking` backend call: (1) ensure the userId passed to the backend is the plain phone number from localStorage (stripped of '+91' prefix if the backend expects a plain 10-digit string); (2) ensure the addressId references a valid address that belongs to the user â€” if no addresses are present, block progression and prompt the user to add an address first; (3) ensure scheduledTime is serialised as an integer timestamp (nanoseconds or milliseconds as expected by the Motoko backend) and not as a string or ISO date; (4) ensure all BookingItems have valid categoryId, estimatedWeight (a positive Float), and that the array is non-empty before submission; (5) ensure totalEstimatedAmount is computed correctly as a Float and passed in the expected Motoko type; (6) wrap the actor call in a try/catch and surface a human-readable error message on the Step 4 confirm screen if the backend returns an error variant or throws. After a successful booking creation, navigate to `/booking-confirmation` with the new booking ID.",
      "files": [
        "frontend/src/hooks/useQueries.ts",
        "frontend/src/pages/BookPickup.tsx"
      ],
      "components": [
        "authorization@4.0.0",
        "blob-storage@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0"
      ],
      "testIds": [
        "REQ-65"
      ],
      "confidence": "high"
    }
  ]
}