{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 27,
  "summary": "Bhangar wala is a PWA that connects households with scrap collection partners for doorstep pickup and instant payment. Built with React, Tailwind CSS, Vite, and Supabase. Features phone OTP auth, address management, scrap category selection, booking system, real-time tracking, dynamic pricing, UPI/cash payments, booking history, ratings, push notifications, and customer support. Mobile-first design with green/slate/amber palette. Authentication uses simulated phone OTP flow (Internet Identity migration was attempted but reverted due to mobile connection issues).",
  "architectural_notes": [
    "Tech stack: React + Tailwind CSS + Vite (frontend), Supabase (auth, DB, storage, realtime)",
    "External APIs: SMS Gateway (OTP), Google Maps (address/location), UPI/Razorpay (payments), Firebase Cloud Messaging (push notifications)",
    "PWA with service workers for offline functionality",
    "Color palette: Primary #16A34A (Green), Secondary #64748B (Slate), Accent #F59E0B (Amber)",
    "Bottom nav: Home, Bookings, Profile, Support. Header has notifications icon and location indicator.",
    "DB schema: Users, Addresses, ScrapCategories, ScrapRates, Bookings, BookingItems, Partners, Payments",
    "Supabase realtime subscriptions used for order/tracking status updates",
    "Mobile-first design, typography: Inter/Poppins headings, system fonts for body",
    "Multilingual support required: Hindi, Marathi, Gujarati, Marwadi, English (i18n/localization layer needed)"
  ],
  "known_issues": [
    "Profile saving error reported by user (exact cause unknown, build failed to fix automatically)",
    "Booking creation error reported on Book Pickup screen (exact cause unknown, under investigation)"
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-apply-a-mobile-first-eco-friendly-visual-theme-across-the-entire-app-using-primary-16a34a-green-secondary-64748b-slate-gray-and-accent-f59e0b-amber-use-inter-or-poppins-for-headings-and-system-fonts-for-body-text-all-screens-must-use-a-bottom-navigation-bar-home-bookings-profile-support-and-a-top-header-with-a-notification-bell-icon-and-location-indicator-design-must-be-optimized-for-touch-interactions-with-large-tap-targets",
      "title": "Apply a mobile-first, eco-friendly visual theme across the entire app using Primary #16A34A (Green), Secondary #64748B (Slate Gray), and Accent #F59E0B (Amber). Use Inter or Poppins for headings and system fonts for body text. All screens must use a bottom navigation bar (Home, Bookings, Profile, Support) and a top header with a notification bell icon and location indicator. Design must be optimized for touch interactions with large tap targets.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-splash-screen-splash-displaying-the-app-logo-a-loading-progress-animation-and-version-info-after-a-brief-delay-auto-redirect-to-home-if-the-user-is-authenticated-has-a-session-in-local-storage-or-to-login-if-not",
      "title": "Create a Splash screen (`/splash`) displaying the app logo, a loading/progress animation, and version info. After a brief delay, auto-redirect to `/home` if the user is authenticated (has a session in local storage), or to `/login` if not.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-login-screen-login-with-a-phone-number-input-field-country-code-selector-defaulting-to-91-an-send-otp-button-and-a-terms-conditions-checkbox-on-submitting-a-valid-phone-number-navigate-to-otp-verification-and-store-the-phone-number-in-component-state",
      "title": "Create a Login screen (`/login`) with a phone number input field, country code selector defaulting to +91, an 'Send OTP' button, and a terms & conditions checkbox. On submitting a valid phone number, navigate to `/otp-verification` and store the phone number in component state.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-otp-verification-screen-otp-verification-with-6-individual-digit-input-boxes-a-60-second-countdown-timer-a-resend-otp-button-enabled-only-after-timer-expires-and-a-verify-button-on-successful-verification-simulated-accept-any-6-digit-code-navigate-first-time-users-to-profile-setup-and-returning-users-to-home-store-auth-session-in-localstorage",
      "title": "Create an OTP Verification screen (`/otp-verification`) with 6 individual digit input boxes, a 60-second countdown timer, a 'Resend OTP' button (enabled only after timer expires), and a 'Verify' button. On successful verification (simulated: accept any 6-digit code), navigate first-time users to `/profile-setup` and returning users to `/home`. Store auth session in localStorage.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-profile-setup-screen-profile-setup-for-first-time-users-with-a-name-text-input-a-profile-picture-upload-picker-and-an-address-form-street-city-pincode-fields-include-a-save-continue-button-that-saves-the-profile-to-backend-and-navigates-to-home",
      "title": "Create a Profile Setup screen (`/profile-setup`) for first-time users with: a name text input, a profile picture upload/picker, and an address form (street, city, pincode fields). Include a 'Save & Continue' button that saves the profile to backend and navigates to `/home`.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-home-dashboard-screen-home-showing-a-welcome-message-with-the-user-s-name-a-prominent-book-pickup-cta-button-a-grid-of-scrap-category-cards-icon-name-and-a-recent-bookings-section-showing-up-to-3-latest-bookings-with-status-badges-tapping-book-pickup-navigates-to-book-pickup-tapping-a-recent-booking-navigates-to-booking-details-id",
      "title": "Create the Home dashboard screen (`/home`) showing: a welcome message with the user's name, a prominent 'Book Pickup' CTA button, a grid of scrap category cards (icon + name), and a 'Recent Bookings' section showing up to 3 latest bookings with status badges. Tapping 'Book Pickup' navigates to `/book-pickup`; tapping a recent booking navigates to `/booking-details/:id`.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-book-pickup-screen-book-pickup-as-a-multi-step-form-with-step-1-address-selector-list-of-saved-addresses-with-option-to-add-new-step-2-scrap-type-selector-category-subcategory-and-weight-input-in-kg-step-3-date-and-time-slot-picker-show-next-7-days-4-time-slots-per-day-9-11am-11am-1pm-2-4pm-4-6pm-step-4-price-estimate-display-rate-estimated-weight-with-itemized-breakdown-a-confirm-booking-button-creates-the-booking-in-the-backend-and-navigates-to-booking-confirmation",
      "title": "Create the Book Pickup screen (`/book-pickup`) as a multi-step form with: Step 1 — Address selector (list of saved addresses with option to add new); Step 2 — Scrap type selector (category + subcategory) and weight input in kg; Step 3 — Date and time slot picker (show next 7 days, 4 time slots per day: 9–11am, 11am–1pm, 2–4pm, 4–6pm); Step 4 — Price estimate display (rate × estimated weight) with itemized breakdown. A 'Confirm Booking' button creates the booking in the backend and navigates to `/booking-confirmation`.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-booking-confirmation-screen-booking-confirmation-showing-booking-id-selected-address-scrap-category-and-weight-scheduled-date-and-time-estimated-price-and-a-simulated-assigned-partner-card-name-vehicle-type-star-rating-contact-button-include-a-track-pickup-button-navigating-to-track-pickup-and-a-cancel-booking-button-that-updates-the-booking-status-to-cancelled-and-navigates-to-home",
      "title": "Create the Booking Confirmation screen (`/booking-confirmation`) showing: booking ID, selected address, scrap category and weight, scheduled date and time, estimated price, and a simulated assigned partner card (name, vehicle type, star rating, contact button). Include a 'Track Pickup' button navigating to `/track-pickup` and a 'Cancel Booking' button that updates the booking status to 'cancelled' and navigates to `/home`.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-track-pickup-screen-track-pickup-showing-a-simulated-map-area-static-illustrated-map-placeholder-since-live-gps-is-not-supported-partner-details-card-a-booking-status-timeline-booked-partner-assigned-on-the-way-arrived-completed-and-contact-buttons-call-whatsapp-as-tel-and-wa-me-links-include-a-floating-cancel-button-visible-until-status-is-arrived",
      "title": "Create the Track Pickup screen (`/track-pickup`) showing a simulated map area (static illustrated map placeholder since live GPS is not supported), partner details card, a booking status timeline (Booked → Partner Assigned → On the Way → Arrived → Completed), and contact buttons (Call, WhatsApp as tel: and wa.me links). Include a floating 'Cancel' button visible until status is 'Arrived'.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-payment-screen-payment-showing-final-weight-input-editable-pre-filled-with-estimated-weight-itemized-price-breakdown-category-final-weight-rate-total-amount-payment-method-selection-cash-or-upi-and-a-confirm-payment-button-on-confirmation-create-a-payment-record-in-the-backend-with-status-completed-and-navigate-to-payment-success",
      "title": "Create the Payment screen (`/payment`) showing: final weight input (editable, pre-filled with estimated weight), itemized price breakdown (category × final weight × rate), total amount, payment method selection (Cash or UPI), and a 'Confirm Payment' button. On confirmation, create a Payment record in the backend with status 'completed' and navigate to `/payment-success`.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-payment-success-screen-payment-success-with-a-success-animation-animated-green-checkmark-a-receipt-card-showing-booking-id-scrap-details-final-weight-total-amount-paid-and-payment-method-include-a-download-receipt-button-triggers-browser-print-a-rate-service-button-navigating-to-rate-service-and-a-back-to-home-button",
      "title": "Create the Payment Success screen (`/payment-success`) with a success animation (animated green checkmark), a receipt card showing booking ID, scrap details, final weight, total amount paid, and payment method. Include a 'Download Receipt' button (triggers browser print), a 'Rate Service' button navigating to `/rate-service`, and a 'Back to Home' button.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-rate-service-screen-rate-service-with-an-interactive-5-star-rating-component-an-optional-text-comment-box-a-submit-rating-button-and-a-skip-button-on-submission-save-the-rating-to-the-backend-and-navigate-to-home",
      "title": "Create the Rate Service screen (`/rate-service`) with an interactive 5-star rating component, an optional text comment box, a 'Submit Rating' button, and a 'Skip' button. On submission, save the rating to the backend and navigate to `/home`.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-bookings-history-screen-bookings-showing-a-list-of-all-user-bookings-sorted-by-date-descending-with-filter-chips-all-pending-completed-cancelled-and-a-search-bar-filtering-by-booking-id-or-address-each-list-item-shows-booking-id-date-scrap-category-amount-and-a-colored-status-badge-tapping-an-item-navigates-to-booking-details-id",
      "title": "Create the Bookings history screen (`/bookings`) showing a list of all user bookings sorted by date descending, with filter chips (All, Pending, Completed, Cancelled) and a search bar filtering by booking ID or address. Each list item shows booking ID, date, scrap category, amount, and a colored status badge. Tapping an item navigates to `/booking-details/:id`.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-booking-details-screen-booking-details-id-showing-complete-booking-information-booking-id-status-scheduled-time-address-scrap-items-with-weights-and-rates-partner-info-payment-details-and-a-receipt-summary-include-a-contact-support-button-and-a-back-button-to-bookings",
      "title": "Create the Booking Details screen (`/booking-details/:id`) showing complete booking information: booking ID, status, scheduled time, address, scrap items with weights and rates, partner info, payment details, and a receipt summary. Include a 'Contact Support' button and a back button to `/bookings`.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-profile-screen-profile-showing-the-user-s-avatar-name-and-phone-number-with-list-items-navigating-to-edit-profile-name-photo-edit-form-manage-addresses-addresses-and-app-settings-toggle-switches-for-notification-preferences-dark-mode-placeholder-include-a-logout-button-that-clears-localstorage-and-redirects-to-login",
      "title": "Create the Profile screen (`/profile`) showing the user's avatar, name, and phone number, with list items navigating to: Edit Profile (name/photo edit form), Manage Addresses (`/addresses`), and App Settings (toggle switches for: notification preferences, dark mode placeholder). Include a 'Logout' button that clears localStorage and redirects to `/login`.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-addresses-screen-addresses-showing-all-saved-addresses-as-cards-with-label-street-city-and-pincode-each-card-has-edit-and-delete-action-buttons-a-floating-button-navigates-to-add-address-deleting-an-address-removes-it-from-the-backend",
      "title": "Create the Addresses screen (`/addresses`) showing all saved addresses as cards with label, street, city, and pincode. Each card has Edit and Delete action buttons. A floating '+' button navigates to `/add-address`. Deleting an address removes it from the backend.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-create-add-address-add-address-and-edit-address-edit-address-id-screens-with-form-fields-address-label-home-work-other-street-address-city-pincode-and-optional-latitude-longitude-inputs-a-save-button-creates-or-updates-the-address-in-the-backend-and-navigates-back-to-addresses",
      "title": "Create Add Address (`/add-address`) and Edit Address (`/edit-address/:id`) screens with form fields: address label (Home/Work/Other), street address, city, pincode, and optional latitude/longitude inputs. A 'Save' button creates or updates the address in the backend and navigates back to `/addresses`.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-support-screen-support-with-an-expandable-faq-accordion-section-at-least-6-hardcoded-faqs-about-scrap-pickup-pricing-cancellation-and-payment-a-call-support-button-tel-link-a-whatsapp-button-wa-me-link-and-an-email-support-button-mailto-link-include-a-simple-in-app-support-ticket-form-subject-message-submit-that-saves-the-message-to-the-backend",
      "title": "Create the Support screen (`/support`) with: an expandable FAQ accordion section (at least 6 hardcoded FAQs about scrap pickup, pricing, cancellation, and payment), a 'Call Support' button (tel: link), a 'WhatsApp' button (wa.me: link), and an email support button (mailto: link). Include a simple in-app support ticket form (subject + message + submit) that saves the message to the backend.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-notifications-screen-notifications-showing-a-list-of-in-app-notifications-simulated-booking-confirmed-partner-assigned-partner-on-the-way-payment-received-stored-in-the-backend-per-user-each-notification-shows-an-icon-title-message-and-timestamp-include-mark-all-as-read-and-clear-all-buttons-the-notification-bell-in-the-top-header-shows-an-unread-count-badge",
      "title": "Create the Notifications screen (`/notifications`) showing a list of in-app notifications (simulated: booking confirmed, partner assigned, partner on the way, payment received) stored in the backend per user. Each notification shows an icon, title, message, and timestamp. Include 'Mark All as Read' and 'Clear All' buttons. The notification bell in the top header shows an unread count badge.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-booking-confirmation-screen-booking-confirmation-to-fetch-the-assigned-partner-details-from-the-backend-using-the-partnerid-on-the-booking-record-replacing-the-current-simulated-static-partner-card-with-live-data-showing-the-partner-s-name-vehicle-type-and-star-rating",
      "title": "Update the Booking Confirmation screen (`/booking-confirmation`) to fetch the assigned partner details from the backend using the partnerId on the booking record, replacing the current simulated static partner card with live data showing the partner's name, vehicle type, and star rating.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-track-pickup-screen-track-pickup-to-display-the-assigned-partner-s-real-name-phone-and-vehicle-type-fetched-from-the-backend-booking-record-replacing-the-static-simulated-partner-card",
      "title": "Update the Track Pickup screen (`/track-pickup`) to display the assigned partner's real name, phone, and vehicle type fetched from the backend booking record, replacing the static simulated partner card.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-track-pickup-screen-track-pickup-add-a-dev-demo-simulate-status-button-visible-only-in-development-or-as-a-small-inconspicuous-control-that-cycles-the-booking-status-through-the-progression-confirmed-partner-assigned-on-the-way-arrived-completed-each-tap-advances-to-the-next-status-by-calling-the-updatebookingstatus-backend-method-and-refetches-the-booking-to-reflect-the-updated-status-stepper",
      "title": "On the Track Pickup screen (`/track-pickup`), add a dev/demo 'Simulate Status' button (visible only in development or as a small inconspicuous control) that cycles the booking status through the progression: confirmed → partner_assigned → on_the_way → arrived → completed. Each tap advances to the next status by calling the updateBookingStatus backend method and refetches the booking to reflect the updated status stepper.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-visible-helper-hint-on-the-otp-verification-screen-otp-verification-that-reads-enter-any-6-digit-code-to-verify-displayed-below-the-digit-input-boxes-styled-as-a-small-muted-informational-note-so-users-understand-no-real-sms-is-sent",
      "title": "Add a visible helper hint on the OTP Verification screen (`/otp-verification`) that reads 'Enter any 6-digit code to verify' displayed below the digit input boxes, styled as a small muted informational note, so users understand no real SMS is sent.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-build-a-partner-panel-screen-partner-panel-accessible-via-a-direct-url-no-bottom-nav-link-required-for-regular-users-the-panel-shows-a-list-of-bookings-assigned-to-the-logged-in-partner-filter-by-partnerid-each-booking-card-shows-booking-id-customer-address-scrap-category-scheduled-time-and-current-status-include-an-accept-button-sets-status-to-partner-assigned-and-a-update-status-button-that-advances-the-booking-through-on-the-way-arrived-completed-the-partner-is-identified-by-matching-their-phone-number-stored-in-localstorage-against-the-partners-table",
      "title": "Build a Partner Panel screen (`/partner-panel`) accessible via a direct URL (no bottom nav link required for regular users). The panel shows a list of bookings assigned to the logged-in partner (filter by partnerId). Each booking card shows booking ID, customer address, scrap category, scheduled time, and current status. Include an 'Accept' button (sets status to `partner_assigned`) and a 'Update Status' button that advances the booking through `on_the_way → arrived → completed`. The partner is identified by matching their phone number stored in localStorage against the Partners table.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-payment-screen-payment-when-the-user-selects-upi-as-the-payment-method-display-a-upi-qr-code-image-placeholder-a-styled-box-showing-a-mock-qr-code-svg-or-generated-image-with-the-upi-id-bhangarwala-upi-and-the-total-amount-include-a-copy-upi-id-button-that-copies-the-upi-id-to-clipboard",
      "title": "On the Payment screen (`/payment`), when the user selects UPI as the payment method, display a UPI QR code image placeholder (a styled box showing a mock QR code SVG or generated image) with the UPI ID `bhangarwala@upi` and the total amount. Include a 'Copy UPI ID' button that copies the UPI ID to clipboard.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-polish-the-receipt-on-the-payment-success-screen-payment-success-for-professional-printing-add-the-app-logo-name-at-the-top-of-the-receipt-card-include-a-horizontal-rule-dividing-header-from-body-add-a-receipt-no-derived-from-the-payment-id-show-the-payment-date-time-list-each-scrap-item-with-category-final-weight-rate-per-kg-and-line-total-show-a-grand-total-row-with-bold-styling-and-add-a-footer-with-thank-you-for-using-bhangar-wala-text-when-the-download-receipt-button-is-tapped-trigger-window-print-and-include-a-media-print-css-block-that-hides-all-page-elements-except-the-receipt-card",
      "title": "Polish the receipt on the Payment Success screen (`/payment-success`) for professional printing: add the app logo/name at the top of the receipt card, include a horizontal rule dividing header from body, add a 'Receipt No.' derived from the payment ID, show the payment date/time, list each scrap item with category, final weight, rate per kg, and line total, show a grand total row with bold styling, and add a footer with 'Thank you for using Bhangar Wala' text. When the 'Download Receipt' button is tapped, trigger `window.print()` and include a `@media print` CSS block that hides all page elements except the receipt card.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-build-an-admin-scrap-rates-screen-admin-rates-accessible-via-direct-url-it-displays-a-table-of-all-scrap-categories-with-their-current-rate-per-kg-fetched-via-getscraprateswithcategories-each-row-has-an-inline-editable-price-field-and-a-save-button-that-calls-updatescraprate-include-a-page-header-scrap-rate-management-and-a-note-changes-apply-immediately-to-all-new-bookings",
      "title": "Build an Admin — Scrap Rates screen (`/admin/rates`) accessible via direct URL. It displays a table of all scrap categories with their current rate per kg (fetched via `getScrapRatesWithCategories`). Each row has an inline editable price field and a 'Save' button that calls `updateScrapRate`. Include a page header 'Scrap Rate Management' and a note 'Changes apply immediately to all new bookings'.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-add-pwa-support-to-the-frontend-create-a-frontend-public-manifest-json-with-app-name-bhangar-wala-short-name-bhangarwala-theme-color-16a34a-background-color-ffffff-display-mode-standalone-start-url-and-icon-entries-for-192-192-and-512-512-png-icons-register-a-service-worker-frontend-public-sw-js-that-caches-the-app-shell-html-css-js-using-a-cache-first-strategy-for-static-assets-and-a-network-first-strategy-for-api-calls-link-the-manifest-in-frontend-index-html-generate-the-required-pwa-icon-images",
      "title": "Add PWA support to the frontend: create a `frontend/public/manifest.json` with app name 'Bhangar Wala', short name 'BhangarWala', theme color `#16A34A`, background color `#ffffff`, display mode `standalone`, start URL `/`, and icon entries for 192×192 and 512×512 PNG icons. Register a service worker (`frontend/public/sw.js`) that caches the app shell (HTML, CSS, JS) using a cache-first strategy for static assets and a network-first strategy for API calls. Link the manifest in `frontend/index.html`. Generate the required PWA icon images.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-render-the-generated-pwa-and-app-icons-bhangar-wala-icon-192-dim-192x192-png-and-bhangar-wala-icon-512-dim-512x512-png-as-static-assets-in-frontend-public-assets-generated-and-reference-them-correctly-in-frontend-public-manifest-json-icon-entries-and-frontend-index-html-apple-touch-icon-link",
      "title": "Render the generated PWA and app icons (bhangar-wala-icon-192.dim_192x192.png and bhangar-wala-icon-512.dim_512x512.png) as static assets in frontend/public/assets/generated and reference them correctly in frontend/public/manifest.json icon entries and frontend/index.html apple-touch-icon link.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-deploy-the-full-bhangar-wala-application-backend-motoko-canister-and-frontend-react-pwa-to-the-internet-computer-mainnet-so-the-app-is-publicly-accessible-via-a-live-ic-url",
      "title": "Deploy the full Bhangar Wala application (backend Motoko canister and frontend React PWA) to the Internet Computer mainnet so the app is publicly accessible via a live IC URL.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-admin-panel-dashboard-screen-admin-accessible-via-direct-url-no-bottom-nav-link-required-the-dashboard-should-display-summary-statistics-cards-total-bookings-total-revenue-active-partners-and-pending-bookings-include-quick-navigation-links-to-all-admin-sub-sections-scrap-rates-bookings-partners-support-tickets-style-consistently-with-the-app-s-green-slate-amber-theme-but-with-a-distinct-admin-layout-no-bottom-nav-bar-sidebar-or-top-tab-navigation-instead",
      "title": "Create an Admin Panel dashboard screen (`/admin`) accessible via direct URL (no bottom nav link required). The dashboard should display summary statistics cards: total bookings, total revenue, active partners, and pending bookings. Include quick navigation links to all admin sub-sections (Scrap Rates, Bookings, Partners, Support Tickets). Style consistently with the app's green/slate/amber theme but with a distinct admin layout (no bottom nav bar, sidebar or top tab navigation instead).",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-admin-all-bookings-screen-admin-bookings-that-displays-a-paginated-table-list-of-all-bookings-in-the-system-not-filtered-by-user-each-row-shows-booking-id-customer-name-phone-scrap-category-scheduled-time-assigned-partner-name-status-badge-and-estimated-amount-include-filter-chips-for-status-all-pending-confirmed-partner-assigned-on-the-way-arrived-completed-cancelled-and-a-search-bar-filtering-by-booking-id-or-customer-phone-tapping-a-row-navigates-to-booking-details-id-include-a-back-button-to-admin",
      "title": "Create an Admin — All Bookings screen (`/admin/bookings`) that displays a paginated table/list of all bookings in the system (not filtered by user). Each row shows booking ID, customer name/phone, scrap category, scheduled time, assigned partner name, status badge, and estimated amount. Include filter chips for status (All, Pending, Confirmed, Partner Assigned, On the Way, Arrived, Completed, Cancelled) and a search bar filtering by booking ID or customer phone. Tapping a row navigates to `/booking-details/:id`. Include a back button to `/admin`.",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-admin-partners-management-screen-admin-partners-that-lists-all-partners-from-the-backend-each-partner-card-shows-name-phone-vehicle-type-star-rating-and-active-inactive-status-toggle-include-an-add-partner-floating-button-that-opens-an-inline-form-or-modal-to-create-a-new-partner-fields-name-phone-vehicle-type-initial-rating-defaulting-to-5-0-active-toggle-each-card-also-has-an-edit-button-to-update-partner-details-and-a-deactivate-activate-toggle-that-updates-the-partner-s-active-status-in-the-backend-include-a-back-button-to-admin",
      "title": "Create an Admin — Partners Management screen (`/admin/partners`) that lists all partners from the backend. Each partner card shows name, phone, vehicle type, star rating, and active/inactive status toggle. Include an 'Add Partner' floating button that opens an inline form or modal to create a new partner (fields: name, phone, vehicle type, initial rating defaulting to 5.0, active toggle). Each card also has an 'Edit' button to update partner details and a 'Deactivate/Activate' toggle that updates the partner's active status in the backend. Include a back button to `/admin`.",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-admin-support-tickets-screen-admin-support-tickets-that-lists-all-support-tickets-submitted-by-users-via-the-support-screen-each-ticket-card-shows-the-user-s-phone-name-subject-message-body-and-submission-timestamp-include-a-status-toggle-open-resolved-on-each-card-that-updates-the-ticket-status-in-the-backend-include-a-back-button-to-admin",
      "title": "Create an Admin — Support Tickets screen (`/admin/support-tickets`) that lists all support tickets submitted by users via the Support screen. Each ticket card shows the user's phone/name, subject, message body, and submission timestamp. Include a status toggle (Open/Resolved) on each card that updates the ticket status in the backend. Include a back button to `/admin`.",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-add-admin-navigation-register-the-admin-admin-bookings-admin-partners-and-admin-support-tickets-routes-in-frontend-src-app-tsx-as-standalone-routes-outside-the-authenticated-layout-similar-to-partner-panel-and-admin-rates-ensure-none-of-these-admin-routes-show-the-bottom-navigation-bar-or-the-standard-user-top-header",
      "title": "Add admin navigation: register the `/admin`, `/admin/bookings`, `/admin/partners`, and `/admin/support-tickets` routes in `frontend/src/App.tsx` as standalone routes (outside the authenticated layout, similar to `/partner-panel` and `/admin/rates`). Ensure none of these admin routes show the bottom navigation bar or the standard user top header.",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-scrap-shop-registration-screen-at-the-route-shop-register-this-screen-allows-scrap-dealers-and-shop-owners-to-register-their-business-it-must-support-five-languages-english-hindi-marathi-gujarati-and-marwadi-switchable-via-a-prominent-language-selector-flag-label-chips-at-the-top-of-the-page-all-form-labels-placeholders-button-text-validation-messages-and-instructional-copy-must-change-dynamically-based-on-the-selected-language-use-a-translations-object-keyed-by-language-code-en-hi-mr-gu-mw-within-the-component-the-form-must-include-owner-proprietor-name-shop-name-phone-number-10-digit-pre-filled-if-available-from-localstorage-email-address-optional-city-free-text-input-area-locality-free-text-input-supports-multi-area-context-so-dealers-can-describe-their-service-coverage-area-pincode-street-address-shop-address-scrap-categories-handled-multi-select-checkboxes-from-the-app-s-scrap-category-list-fetched-from-backend-and-preferred-language-auto-set-to-the-currently-selected-ui-language-but-editable-include-a-register-shop-submit-button-that-calls-the-registerscrapshop-backend-method-on-success-show-a-confirmation-message-translated-and-navigate-to-shop-register-status-on-validation-error-show-inline-translated-error-messages",
      "title": "Create a Scrap Shop Registration screen at the route /shop-register. This screen allows scrap dealers and shop owners to register their business. It must support five languages — English, Hindi (हिन्दी), Marathi (मराठी), Gujarati (ગુજરાતી), and Marwadi (मारवाड़ी) — switchable via a prominent language selector (flag/label chips) at the top of the page. All form labels, placeholders, button text, validation messages, and instructional copy must change dynamically based on the selected language. Use a translations object keyed by language code ('en', 'hi', 'mr', 'gu', 'mw') within the component. The form must include: Owner/Proprietor Name, Shop Name, Phone Number (10-digit, pre-filled if available from localStorage), Email Address (optional), City (free-text input), Area/Locality (free-text input — supports multi-area context so dealers can describe their service coverage area), Pincode, Street Address / Shop Address, Scrap Categories Handled (multi-select checkboxes from the app's scrap category list fetched from backend), and Preferred Language (auto-set to the currently selected UI language but editable). Include a 'Register Shop' submit button that calls the registerScrapShop backend method. On success, show a confirmation message (translated) and navigate to /shop-register/status. On validation error, show inline translated error messages.",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-shop-registration-status-screen-at-shop-register-status-this-screen-displays-the-current-registration-status-of-the-shop-associated-with-the-logged-in-user-s-phone-number-fetched-via-getscrapshopbyphone-show-the-shop-name-registration-date-and-a-status-badge-pending-amber-approved-green-or-rejected-red-include-translated-status-messages-for-each-state-in-all-five-languages-english-hindi-marathi-gujarati-marwadi-if-the-status-is-pending-show-a-note-that-review-takes-24-48-hours-if-approved-show-a-go-to-home-button-if-rejected-show-a-re-register-button-navigating-back-to-shop-register-include-a-language-selector-matching-the-one-on-shop-register-so-the-user-can-read-the-status-in-their-preferred-language",
      "title": "Create a Shop Registration Status screen at /shop-register/status. This screen displays the current registration status of the shop associated with the logged-in user's phone number (fetched via getScrapShopByPhone). Show the shop name, registration date, and a status badge: Pending (amber), Approved (green), or Rejected (red). Include translated status messages for each state in all five languages (English, Hindi, Marathi, Gujarati, Marwadi). If the status is pending, show a note that review takes 24–48 hours. If approved, show a 'Go to Home' button. If rejected, show a 'Re-register' button navigating back to /shop-register. Include a language selector matching the one on /shop-register so the user can read the status in their preferred language.",
      "reqIds": [
        "REQ-44"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-admin-scrap-shop-registrations-screen-at-admin-shop-registrations-this-screen-lists-all-registered-scrap-shops-fetched-via-getallscrapshops-in-a-card-table-layout-each-entry-shows-shop-name-owner-name-phone-city-area-pincode-scrap-categories-handled-preferred-language-registration-date-and-current-status-badge-include-filter-chips-all-pending-approved-rejected-include-a-search-bar-filtering-by-shop-name-phone-or-city-each-card-has-an-approve-button-calls-updatescrapshopstatus-with-approved-and-a-reject-button-calls-updatescrapshopstatus-with-rejected-visible-when-status-is-pending-use-the-existing-admin-layout-no-bottom-nav-bar-consistent-green-slate-amber-theme-add-a-navigation-link-to-this-screen-from-the-admin-dashboard-admin-quick-navigation-section",
      "title": "Create an Admin — Scrap Shop Registrations screen at /admin/shop-registrations. This screen lists all registered scrap shops (fetched via getAllScrapShops) in a card/table layout. Each entry shows shop name, owner name, phone, city, area, pincode, scrap categories handled, preferred language, registration date, and current status badge. Include filter chips: All, Pending, Approved, Rejected. Include a search bar filtering by shop name, phone, or city. Each card has an 'Approve' button (calls updateScrapShopStatus with #approved) and a 'Reject' button (calls updateScrapShopStatus with #rejected), visible when status is pending. Use the existing admin layout (no bottom nav bar, consistent green/slate/amber theme). Add a navigation link to this screen from the Admin Dashboard (/admin) quick navigation section.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-admin-dashboard-screen-admin-ensure-the-page-is-fully-accessible-by-navigating-directly-to-admin-in-the-browser-the-dashboard-must-display-all-summary-statistics-cards-total-bookings-total-revenue-active-partners-pending-bookings-and-show-quick-navigation-links-to-all-admin-sub-sections-scrap-rates-admin-rates-all-bookings-admin-bookings-partners-admin-partners-support-tickets-admin-support-tickets-and-shop-registrations-admin-shop-registrations-verify-the-admin-layout-renders-without-the-bottom-navigation-bar-or-standard-user-top-header",
      "title": "On the Admin Dashboard screen (/admin), ensure the page is fully accessible by navigating directly to /admin in the browser. The dashboard must display all summary statistics cards (total bookings, total revenue, active partners, pending bookings) and show quick navigation links to all admin sub-sections: Scrap Rates (/admin/rates), All Bookings (/admin/bookings), Partners (/admin/partners), Support Tickets (/admin/support-tickets), and Shop Registrations (/admin/shop-registrations). Verify the admin layout renders without the bottom navigation bar or standard user top header.",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-simulated-phone-otp-login-flow-with-internet-identity-authentication-update-the-login-screen-login-to-display-a-single-sign-in-button-replacing-the-phone-number-input-country-code-selector-otp-fields-and-terms-checkbox-tapping-sign-in-triggers-the-internet-identity-login-popup-using-the-useinternetidentity-hook-already-available-at-frontend-src-hooks-useinternetidentity-ts-after-successful-login-check-whether-a-user-profile-exists-in-the-backend-if-no-profile-exists-navigate-to-profile-setup-if-a-profile-exists-navigate-to-home-remove-the-otp-verification-route-and-page",
      "title": "Replace the simulated phone OTP login flow with Internet Identity authentication. Update the Login screen (`/login`) to display a single 'Sign In' button (replacing the phone number input, country code selector, OTP fields, and terms checkbox). Tapping 'Sign In' triggers the Internet Identity login popup using the `useInternetIdentity` hook already available at `frontend/src/hooks/useInternetIdentity.ts`. After successful login, check whether a user profile exists in the backend: if no profile exists, navigate to `/profile-setup`; if a profile exists, navigate to `/home`. Remove the `/otp-verification` route and page.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-profile-setup-screen-profile-setup-to-derive-the-user-identifier-from-the-internet-identity-principal-via-useinternetidentity-rather-than-from-a-phone-number-stored-in-localstorage-use-the-principal-text-as-the-user-id-when-calling-the-backend-createuserprofile-method-since-phone-number-is-no-longer-collected-during-login-make-the-phone-field-on-the-profile-setup-form-optional",
      "title": "Update the Profile Setup screen (`/profile-setup`) to derive the user identifier from the Internet Identity principal (via `useInternetIdentity`) rather than from a phone number stored in localStorage. Use the principal text as the user ID when calling the backend `createUserProfile` method. Since phone number is no longer collected during login, make the phone field on the profile setup form optional.",
      "reqIds": [
        "REQ-51"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-public-sw-js-update-the-service-worker-s-network-first-strategy-to-correctly-bypass-caching-for-internet-identity-authentication-requests-requests-to-identity-ic0-app-identity-internetcomputer-org-and-icp-canister-api-calls-ensure-the-service-worker-does-not-intercept-or-cache-these-requests-which-causes-unable-to-connect-failures-on-mobile-browsers-where-service-worker-behavior-differs-from-desktop",
      "title": "In `frontend/public/sw.js`, update the service worker's network-first strategy to correctly bypass caching for Internet Identity authentication requests (requests to `identity.ic0.app`, `identity.internetcomputer.org`) and ICP canister API calls. Ensure the service worker does not intercept or cache these requests, which causes 'unable to connect' failures on mobile browsers where service worker behavior differs from desktop.",
      "reqIds": [
        "REQ-53"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-user-facing-error-state-on-the-login-screen-login-that-displays-a-clear-friendly-message-when-the-internet-identity-connection-fails-e-g-network-error-or-popup-blocked-on-mobile-show-a-retry-button-that-re-attempts-the-login-call-this-prevents-users-from-seeing-a-blank-or-broken-screen-when-connectivity-issues-occur",
      "title": "Add a user-facing error state on the Login screen (`/login`) that displays a clear, friendly message when the Internet Identity connection fails (e.g., network error or popup blocked on mobile). Show a retry button that re-attempts the `login()` call. This prevents users from seeing a blank or broken screen when connectivity issues occur.",
      "reqIds": [
        "REQ-56"
      ],
      "version": 1
    },
    {
      "id": "feature-restore-the-login-screen-login-to-the-original-phone-otp-flow-display-a-phone-number-input-field-a-country-code-selector-defaulting-to-91-a-send-otp-button-and-a-terms-conditions-checkbox-on-submitting-a-valid-phone-number-navigate-to-otp-verification-and-store-the-phone-number-in-component-state-remove-the-internet-identity-sign-in-button-and-any-ii-related-error-retry-ui-from-this-screen",
      "title": "Restore the Login screen (`/login`) to the original phone OTP flow: display a phone number input field, a country code selector defaulting to +91, a 'Send OTP' button, and a terms & conditions checkbox. On submitting a valid phone number, navigate to `/otp-verification` and store the phone number in component state. Remove the Internet Identity 'Sign In' button and any II-related error/retry UI from this screen.",
      "reqIds": [
        "REQ-57"
      ],
      "version": 1
    },
    {
      "id": "feature-restore-the-otp-verification-route-and-the-otp-verification-page-the-page-must-render-6-individual-digit-input-boxes-a-60-second-countdown-timer-a-resend-otp-button-enabled-only-after-the-timer-expires-and-a-verify-button-on-successful-verification-accept-any-6-digit-code-navigate-first-time-users-to-profile-setup-and-returning-users-to-home-store-the-auth-session-in-localstorage-include-the-helper-hint-enter-any-6-digit-code-to-verify-below-the-digit-input-boxes",
      "title": "Restore the `/otp-verification` route and the OTP Verification page. The page must render 6 individual digit input boxes, a 60-second countdown timer, a 'Resend OTP' button (enabled only after the timer expires), and a 'Verify' button. On successful verification (accept any 6-digit code), navigate first-time users to `/profile-setup` and returning users to `/home`. Store the auth session in localStorage. Include the helper hint 'Enter any 6-digit code to verify' below the digit input boxes.",
      "reqIds": [
        "REQ-58"
      ],
      "version": 1
    },
    {
      "id": "feature-restore-the-profile-setup-screen-profile-setup-to-use-the-phone-number-stored-in-localstorage-set-during-otp-login-as-the-user-identifier-when-calling-the-backend-createuserprofile-method-make-the-phone-field-on-the-profile-setup-form-required-not-optional-consistent-with-the-phone-otp-based-auth-flow",
      "title": "Restore the Profile Setup screen (`/profile-setup`) to use the phone number stored in localStorage (set during OTP login) as the user identifier when calling the backend `createUserProfile` method. Make the phone field on the profile setup form required (not optional), consistent with the phone-OTP-based auth flow.",
      "reqIds": [
        "REQ-59"
      ],
      "version": 1
    },
    {
      "id": "feature-restore-the-splash-screen-splash-redirect-logic-to-use-localstorage-session-detection-not-internet-identity-initialization-state-to-determine-whether-to-redirect-to-home-authenticated-or-login-unauthenticated",
      "title": "Restore the Splash screen (`/splash`) redirect logic to use localStorage session detection (not Internet Identity initialization state) to determine whether to redirect to `/home` (authenticated) or `/login` (unauthenticated).",
      "reqIds": [
        "REQ-60"
      ],
      "version": 1
    },
    {
      "id": "feature-restore-the-profile-screen-profile-logout-action-to-clear-the-localstorage-auth-session-and-redirect-to-login-without-calling-any-internet-identity-logout-method",
      "title": "Restore the Profile screen (`/profile`) logout action to clear the localStorage auth session and redirect to `/login`, without calling any Internet Identity logout method.",
      "reqIds": [
        "REQ-61"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-failed-to-save-profile-please-try-again-error-on-the-profile-setup-screen-profile-setup-the-form-collects-full-name-phone-number-pre-filled-from-localstorage-with-format-91xxxxxxxxxx-street-address-city-and-pincode-diagnose-and-fix-the-createuserprofile-backend-call-1-ensure-the-phone-number-passed-as-the-user-id-is-stripped-of-the-country-code-prefix-91-or-handled-correctly-to-match-the-expected-backend-id-format-2-ensure-all-required-fields-name-phone-are-non-empty-before-submission-3-ensure-the-optional-address-fields-street-city-pincode-are-correctly-serialised-as-an-optional-record-pass-null-if-all-address-fields-are-empty-rather-than-an-empty-object-4-wrap-the-actor-call-in-a-proper-try-catch-and-surface-a-descriptive-error-message-if-the-backend-returns-an-error-variant-after-a-successful-save-navigate-to-home-and-write-the-auth-session-to-localstorage",
      "title": "Fix the 'Failed to save profile. Please try again.' error on the Profile Setup screen (`/profile-setup`). The form collects Full Name, Phone Number (pre-filled from localStorage with format '+91XXXXXXXXXX'), Street Address, City, and Pincode. Diagnose and fix the `createUserProfile` backend call: (1) ensure the phone number passed as the user ID is stripped of the country code prefix ('+91') or handled correctly to match the expected backend ID format; (2) ensure all required fields (name, phone) are non-empty before submission; (3) ensure the optional address fields (street, city, pincode) are correctly serialised as an optional record — pass `null` if all address fields are empty rather than an empty object; (4) wrap the actor call in a proper try/catch and surface a descriptive error message if the backend returns an error variant. After a successful save, navigate to `/home` and write the auth session to localStorage.",
      "reqIds": [
        "REQ-62"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-failed-to-save-address-please-try-again-error-on-the-add-address-screen-add-address-diagnose-and-repair-the-addaddress-backend-call-1-ensure-the-userid-passed-to-the-backend-is-correctly-read-from-localstorage-the-stored-phone-number-without-country-code-prefix-if-required-by-backend-2-ensure-all-required-fields-street-city-pincode-are-non-empty-before-submission-3-ensure-the-address-label-defaults-to-a-valid-value-home-work-or-other-if-unset-4-ensure-optional-lat-lng-fields-are-serialised-as-null-when-not-provided-rather-than-as-undefined-or-empty-string-5-wrap-the-actor-call-in-a-proper-try-catch-and-surface-a-descriptive-inline-error-message-after-a-successful-save-navigate-back-to-addresses",
      "title": "Fix the 'Failed to save address. Please try again.' error on the Add Address screen (`/add-address`). Diagnose and repair the `addAddress` backend call: (1) ensure the userId passed to the backend is correctly read from localStorage (the stored phone number without country code prefix if required by backend); (2) ensure all required fields (street, city, pincode) are non-empty before submission; (3) ensure the address label defaults to a valid value ('Home', 'Work', or 'Other') if unset; (4) ensure optional lat/lng fields are serialised as `null` when not provided rather than as undefined or empty string; (5) wrap the actor call in a proper try/catch and surface a descriptive inline error message. After a successful save, navigate back to `/addresses`.",
      "reqIds": [
        "REQ-64"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-booking-creation-error-on-the-book-pickup-screen-book-pickup-diagnose-and-repair-the-createbooking-backend-call-1-ensure-the-userid-passed-to-the-backend-is-the-plain-phone-number-from-localstorage-stripped-of-91-prefix-if-the-backend-expects-a-plain-10-digit-string-2-ensure-the-addressid-references-a-valid-address-that-belongs-to-the-user-if-no-addresses-are-present-block-progression-and-prompt-the-user-to-add-an-address-first-3-ensure-scheduledtime-is-serialised-as-an-integer-timestamp-nanoseconds-or-milliseconds-as-expected-by-the-motoko-backend-and-not-as-a-string-or-iso-date-4-ensure-all-bookingitems-have-valid-categoryid-estimatedweight-a-positive-float-and-that-the-array-is-non-empty-before-submission-5-ensure-totalestimatedamount-is-computed-correctly-as-a-float-and-passed-in-the-expected-motoko-type-6-wrap-the-actor-call-in-a-try-catch-and-surface-a-human-readable-error-message-on-the-step-4-confirm-screen-if-the-backend-returns-an-error-variant-or-throws-after-a-successful-booking-creation-navigate-to-booking-confirmation-with-the-new-booking-id",
      "title": "Fix the booking creation error on the Book Pickup screen (`/book-pickup`). Diagnose and repair the `createBooking` backend call: (1) ensure the userId passed to the backend is the plain phone number from localStorage (stripped of '+91' prefix if the backend expects a plain 10-digit string); (2) ensure the addressId references a valid address that belongs to the user — if no addresses are present, block progression and prompt the user to add an address first; (3) ensure scheduledTime is serialised as an integer timestamp (nanoseconds or milliseconds as expected by the Motoko backend) and not as a string or ISO date; (4) ensure all BookingItems have valid categoryId, estimatedWeight (a positive Float), and that the array is non-empty before submission; (5) ensure totalEstimatedAmount is computed correctly as a Float and passed in the expected Motoko type; (6) wrap the actor call in a try/catch and surface a human-readable error message on the Step 4 confirm screen if the backend returns an error variant or throws. After a successful booking creation, navigate to `/booking-confirmation` with the new booking ID.",
      "reqIds": [
        "REQ-65"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Mobile OTP authentication with phone number login",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Address management - add, edit, select pickup addresses with map picker",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Scrap category selection (metal, paper, plastic, electronics, etc.) with weight estimation",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Booking system with date/time slot scheduling and price estimation",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Real-time pickup partner tracking with live map and status updates",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Dynamic pricing based on scrap type and weight",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Payment integration - cash and UPI payment processing with receipt",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Booking history with filters, search, and detailed booking view",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Rating and reviews for pickup partners after service completion",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Push notifications for booking status updates via Firebase Cloud Messaging",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Customer support screen with FAQ, in-app chat, and helpline",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Profile management with user info, saved addresses, and settings",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Splash screen with auth-based redirect and PWA service worker offline support",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Notifications screen with mark-as-read and clear-all functionality",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Implement the backend data model in Motoko with the following entities and CRUD operations: Users (id, phone, name, profileImage), Addresses (id, userId, label, street, city, pincode, lat, lng), ScrapCategories (id, name, parentId, unit), ScrapRates (id, categoryId, pricePerKg), Bookings (id, userId, addressId, status, scheduledTime, partnerId, totalEstimatedAmount, totalFinalAmount), BookingItems (id, bookingId, categoryId, estimatedWeight, finalWeight), Partners (id, name, phone, vehicle, rating, active), Payments (id, bookingId, amount, method, status, transactionId), and Ratings (id, bookingId, userId, partnerId, stars, comment). Seed the ScrapCategories and ScrapRates tables with at least: Paper/Newspaper ₹12/kg, Paper/Cardboard ₹8/kg, Metal/Iron ₹30/kg, Metal/Copper ₹450/kg, Plastic/PET Bottles ₹15/kg, Plastic/Hard Plastic ₹10/kg, Electronics/Mobile ₹50/kg, Electronics/Laptop ₹100/kg.",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Add a backend function to automatically assign an available partner to a booking when it is created or confirmed. The function should select a random active partner from the Partners collection and update the booking's partnerId field. Expose this as a callable update method on the main actor.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Seed the Partners table in the backend with at least 5 sample partners, each with a name, phone number, vehicle type (e.g., Mini Truck, Tempo, Cycle Cart), star rating (between 3.5 and 5.0), and active status set to true.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Add a backend function to simulate booking status progression. Expose an `updateBookingStatus` update method that accepts a bookingId and a new status (one of: pending, confirmed, partner_assigned, on_the_way, arrived, completed, cancelled) and updates the booking record accordingly. Add automatic notification creation when status changes to partner_assigned, on_the_way, arrived, and completed.",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Add visible 'Enter any 6-digit code' helper hint on the OTP screen for simulated auth",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Build a partner panel (admin view) where pickup partners can see assigned bookings, accept them, and update status",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Add UPI QR code display on payment screen and polish receipt for professional printing",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Add admin page to manage/update scrap rates (price per kg) without touching code",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Add PWA service worker and manifest file so users can install the app on their phone's home screen",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "Add a backend `updateScrapRate` update method that accepts a categoryId and a new pricePerKg (Float) and updates the corresponding ScrapRate record. Add a `getScrapRatesWithCategories` query method that returns all scrap rates joined with their category names.",
      "reqIds": [
        "REQ-31"
      ],
      "status": "pending"
    },
    {
      "id": "AR-41",
      "summary": "Extend the backend (`backend/main.mo`) with the following new query and update methods needed by the admin panel: `getAllBookings()` returning all bookings with user profile and partner details; `getAllPartners()` returning all partner records; `addPartner(name, phone, vehicle, rating, active)` creating a new partner; `updatePartner(id, name, phone, vehicle, rating)` updating partner details; `togglePartnerActive(id)` toggling a partner's active boolean; `getAllSupportTickets()` returning all support ticket records; `updateSupportTicketStatus(id, status)` updating a support ticket's status to 'open' or 'resolved'.",
      "reqIds": [
        "REQ-41"
      ],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Scrap shop/dealer registration panel with multi-area support and multilingual interface (Hindi, Marathi, Gujarati, Marwadi, English)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-43",
      "summary": "Extend the backend (backend/main.mo) with a new ScrapShop entity and related methods. Add the ScrapShop data type with fields: id (Text), ownerName (Text), shopName (Text), phone (Text), email (Text), city (Text), area (Text), pincode (Text), streetAddress (Text), scrapCategoriesHandled (array of category IDs), preferredLanguage (Text — one of: 'en', 'hi', 'mr', 'gu', 'mw'), registrationStatus (variant: #pending | #approved | #rejected), registeredAt (Int timestamp). Implement: registerScrapShop(ownerName, shopName, phone, email, city, area, pincode, streetAddress, scrapCategoriesHandled, preferredLanguage) — creates a new shop record with status #pending; getScrapShopByPhone(phone) — returns a shop record by phone; getAllScrapShops() — returns all shop records (admin use); updateScrapShopStatus(id, status) — updates registration status to approved or rejected (admin use); updateScrapShop(id, ownerName, shopName, email, city, area, pincode, streetAddress, scrapCategoriesHandled) — updates shop details.",
      "reqIds": [
        "REQ-42"
      ],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "In `backend/main.mo`, review the `createUserProfile` method signature and ensure it correctly accepts a user ID of type `Text` (the phone number string), a name of type `Text`, and an optional address record. Ensure the method does not reject or trap when called with a phone number that includes the '+91' prefix, and that it returns a success variant (e.g., `#ok`) rather than silently failing or returning an error variant when a valid profile is submitted for the first time.",
      "reqIds": [
        "REQ-63"
      ],
      "status": "pending"
    },
    {
      "id": "AR-46",
      "summary": "Fix booking creation error on the Book Pickup screen - user reports error when trying to make a booking for scrap pickup",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-49",
      "summary": "In `backend/main.mo`, audit the `addAddress` and `createBooking` method signatures to verify they accept the argument types that the frontend is sending (Text userId, Float weights, Int timestamps, optional lat/lng as `?Float`). If any parameter types are mismatched or the methods trap on edge-case inputs (empty optional fields, zero weights, addresses without lat/lng), fix the method implementations to handle these gracefully and return a descriptive error variant rather than trapping.",
      "reqIds": [
        "REQ-66"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Bhangar wala",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}